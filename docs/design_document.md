# CLI-интерпретатор

## Общая архитектура

CLI-интерпретатор состоит из нескольких ключевых компонентов, каждый из которых отвечает за определенный этап обработки
команды: от ввода до выполнения.

### **Компоненты системы**

1. **Main**  
   Главный цикл программы. Отвечает за:
    - Чтение пользовательского ввода;
    - Передачу введенной строки в **Parser**;
    - Передачу результата **Parser** в **PipelineExecutor**;
    - Вывод результата выполнения команд в стандартный поток вывода.

2. **Parser**  
   Разбирает строку ввода и превращает её в список токенов. Учитывает:
    - Разделение аргументов по пробелам;
    - Поддержку одинарных и двойных кавычек (`full`/`weak quoting`);
    - Подстановку переменных окружения (`$VAR`);
    - Разделение команд по пайпам (`|`).

3. **Preprocessor**
   Модуль для предварительной обработки ввода. Отвечает за:
    - Подстановку переменных окружения ($VAR → значение переменной);
    - Обработку специальных символов
    - Подготовку токенов для дальнейшей передачи в PipelineExecutor.

4. **PipelineExecutor**
    - Получает список токенов от **Preprocessor**;
    - Делит их на последовательность подкоманд, учитывая пайпы (`|`);
    - Для каждой подкоманды вызывает **CommandExecutor**;
    - Передаёт вывод одной команды как ввод следующей (если используется пайп).

5. **CommandExecutor (интерфейс)**
    - Определяет единый интерфейс для выполнения команды;
    - Поддерживает встроенные команды (`echo`, `cat`, `wc`, `pwd`, `exit`);
    - Если команда не встроенная — передаёт её в систему через Process API.

6. **Environment**
    - Хранит переменные окружения (`имя=значение`);
    - Позволяет изменять и получать переменные;
    - Обрабатывает подстановки (`$VAR` → значение переменной).

## **Принципы работы**

1. Пользователь вводит строку.
2. **Parser** разбирает её и превращает в список токенов.
3. **PipelineExecutor** проверяет наличие пайпов и делит строку на подкоманды.
4. **CommandExecutor** выполняет команды:
    - Если команда встроенная, выполняется соответствующая логика;
    - Если команда не встроенная, вызывается внешний процесс.
5. Вывод отображается в консоли или передаётся в следующую команду через пайп.

## **Поддерживаемые возможности**

- Встроенные команды (`cat`, `echo`, `wc`, `pwd`, `exit`).
- Переменные окружения (`VAR=value`, `$VAR`).
- Вызов внешних программ (`git status`).
- Поддержка пайпов (`|`).
- Поддержка кавычек (`full`/`weak quoting`).

## **Диаграмма компонентов**

![Диаграмма компонентов](img/components_diag.png)

## **Диаграмма классов**

![Диаграмма компонентов](img/class_diag.png)

## Контекст системы

![Диаграмма активностей](img/activity.png)
